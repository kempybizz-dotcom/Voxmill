<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, initial-scale=1.0">
    <title>Voxmill Executive Intelligence Deck</title>
    <link rel="stylesheet" href="voxmill_slides.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>

<!-- ============================================
     SLIDE 1: COVER
     ============================================ -->
<div class="slide slide-cover">
    <div class="logo-container">
        <svg class="voxmill-logo" width="60" height="60" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M40 10 L60 40 L40 70 L20 40 Z" fill="url(#goldGradient)" stroke="#CBA135" stroke-width="2"/>
            <text x="40" y="50" font-family="Playfair Display" font-size="36" font-weight="700" fill="#0C0C0C" text-anchor="middle">V</text>
            <defs>
                <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#CBA135;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#BA955F;stop-opacity:1" />
                </linearGradient>
            </defs>
        </svg>
    </div>
    
    <div class="cover-label">VOXMILL MARKET INTELLIGENCE</div>
    
    <h1 class="cover-title">Market Intelligence Snapshot</h1>
    
    <div class="cover-subtitle">
        <span class="location">{{ location }}</span> Â· {{ report_date }} Â· Confidential Executive Brief
    </div>
    
    <div class="slide-footer">
        <span class="footer-text">Voxmill Automations â€” Confidential | 2025</span>
        <span class="footer-page">1</span>
    </div>
</div>

<!-- ============================================
     SLIDE 2: MARKET OVERVIEW
     ============================================ -->
<div class="slide">
    <div class="slide-header">
        <h2 class="slide-title">Market Overview</h2>
        <div class="slide-meta">
            {{ location }}<br>
            {{ report_date }}
        </div>
    </div>
    
    <div class="slide-content">
        <!-- 2Ã—2 KPI GRID -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-label">Active Listings</div>
                <div class="kpi-value">{{ kpis.total_properties }}</div>
                <div class="kpi-change positive">+{{ kpis.property_change }}% vs. last week</div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Average Price</div>
                <div class="kpi-value">Â£{{ "{:,.0f}".format(kpis.avg_price) }}</div>
                <div class="kpi-change {{ 'positive' if kpis.price_change > 0 else 'negative' }}">
                    {{ "+" if kpis.price_change > 0 else "" }}{{ kpis.price_change }}% vs. last week
                </div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Price per sqft</div>
                <div class="kpi-value">Â£{{ "{:,.0f}".format(kpis.avg_price_per_sqft) }}</div>
                <div class="kpi-change {{ 'positive' if kpis.sqft_change > 0 else 'negative' }}">
                    {{ "+" if kpis.sqft_change > 0 else "" }}{{ kpis.sqft_change }}% vs. last week
                </div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-label">Market Velocity</div>
                <div class="kpi-value">{{ kpis.days_on_market }} days</div>
                <div class="kpi-change {{ 'positive' if kpis.velocity_change < 0 else 'negative' }}">
                    {{ "+" if kpis.velocity_change > 0 else "" }}{{ kpis.velocity_change }}% vs. last week
                </div>
            </div>
        </div>
        
        <!-- CHART SECTION -->
        <div class="chart-section">
            <div class="chart-divider"></div>
            <div class="chart-container">
                <h3 class="chart-title">Price Distribution</h3>
                <svg width="100%" height="220" viewBox="0 0 1700 220" preserveAspectRatio="xMidYMid meet">
                    <!-- Grid -->
                    <line x1="80" y1="40" x2="80" y2="180" stroke="rgba(255,255,255,0.06)" stroke-width="1"/>
                    <line x1="80" y1="180" x2="1620" y2="180" stroke="rgba(255,255,255,0.06)" stroke-width="1"/>
                    
                    <!-- Bars -->
                    {% for bar in chart_data.price_distribution %}
                    <rect x="{{ 180 + loop.index0 * 350 }}" 
                          y="{{ 180 - (bar.height * 0.9) }}" 
                          width="220" 
                          height="{{ bar.height * 0.9 }}" 
                          fill="url(#barGradient)" 
                          stroke="#CBA135" 
                          stroke-width="2"/>
                    <text x="{{ 290 + loop.index0 * 350 }}" 
                          y="{{ 165 - (bar.height * 0.9) }}" 
                          font-family="Inter" 
                          font-size="20" 
                          font-weight="600"
                          fill="#CBA135" 
                          text-anchor="middle">{{ bar.count }}</text>
                    <text x="{{ 290 + loop.index0 * 350 }}" 
                          y="205" 
                          font-family="Inter" 
                          font-size="16" 
                          fill="#AFAFAF" 
                          text-anchor="middle">{{ bar.label }}</text>
                    {% endfor %}
                    
                    <defs>
                        <linearGradient id="barGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#CBA135;stop-opacity:0.95" />
                            <stop offset="100%" style="stop-color:#BA955F;stop-opacity:0.65" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
        </div>
    </div>
    
    <div class="slide-footer">
        <span class="footer-text">Voxmill Automations â€” Confidential | 2025</span>
        <span class="footer-page">2</span>
    </div>
</div>

<!-- ============================================
     SLIDE 3: PERFORMANCE ANALYSIS
     ============================================ -->
<div class="slide">
    <div class="slide-header">
        <h2 class="slide-title">Performance Analysis</h2>
        <div class="slide-meta">
            {{ location }}<br>
            {{ report_date }}
        </div>
    </div>
    
    <div class="slide-content">
        <!-- TWO-COLUMN CHARTS -->
        <div class="two-column">
            <div class="chart-panel">
                <h3 class="chart-title">Price Range Distribution</h3>
                <svg width="100%" height="500" viewBox="0 0 700 500">
                    {% for item in chart_data.price_ranges %}
                    <text x="20" y="{{ 80 + loop.index0 * 90 }}" font-family="Inter" font-size="18" fill="#EAEAEA">{{ item.range }}</text>
                    <rect x="280" 
                          y="{{ 60 + loop.index0 * 90 }}" 
                          width="{{ item.percentage * 3.5 }}" 
                          height="35" 
                          fill="url(#horizontalGradient)" 
                          stroke="#BA955F" 
                          stroke-width="2"/>
                    <text x="{{ 290 + item.percentage * 3.5 }}" 
                          y="{{ 85 + loop.index0 * 90 }}" 
                          font-family="Inter" 
                          font-size="18" 
                          font-weight="600"
                          fill="#CBA135">{{ item.percentage }}%</text>
                    {% endfor %}
                    
                    <defs>
                        <linearGradient id="horizontalGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#BA955F;stop-opacity:0.7" />
                            <stop offset="100%" style="stop-color:#CBA135;stop-opacity:0.95" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            
            <div class="chart-panel">
                <h3 class="chart-title">Weekly Trend: Price per sqft</h3>
                <svg width="100%" height="500" viewBox="0 0 700 500">
                    {% for i in range(5) %}
                    <line x1="60" y1="{{ 90 + i * 80 }}" x2="650" y2="{{ 90 + i * 80 }}" stroke="rgba(255,255,255,0.05)" stroke-width="1"/>
                    {% endfor %}
                    
                    <polyline 
                        points="{% for point in chart_data.weekly_trend %}{{ 80 + loop.index0 * 120 }},{{ 460 - point.value }}{% if not loop.last %} {% endif %}{% endfor %}" 
                        fill="none" 
                        stroke="#CBA135" 
                        stroke-width="4"/>
                    
                    {% for point in chart_data.weekly_trend %}
                    <circle cx="{{ 80 + loop.index0 * 120 }}" 
                            cy="{{ 460 - point.value }}" 
                            r="8" 
                            fill="#CBA135" 
                            stroke="#0C0C0C" 
                            stroke-width="3"/>
                    <text x="{{ 80 + loop.index0 * 120 }}" 
                          y="485" 
                          font-family="Inter" 
                          font-size="16" 
                          fill="#AFAFAF" 
                          text-anchor="middle">{{ point.label }}</text>
                    {% endfor %}
                </svg>
            </div>
        </div>
        
        <!-- INSIGHT CARDS -->
        <div class="insight-cards">
            <div class="insight-card">
                <div class="insight-title">Market Momentum</div>
                <div class="insight-text">{{ insights.momentum }}</div>
            </div>
            
            <div class="insight-card">
                <div class="insight-title">Price Positioning</div>
                <div class="insight-text">{{ insights.positioning }}</div>
            </div>
            
            <div class="insight-card">
                <div class="insight-title">Velocity Signal</div>
                <div class="insight-text">{{ insights.velocity }}</div>
            </div>
        </div>
    </div>
    
    <div class="slide-footer">
        <span class="footer-text">Voxmill Automations â€” Confidential | 2025</span>
        <span class="footer-page">3</span>
    </div>
</div>

<!-- ============================================
     SLIDE 4: COMPETITOR LANDSCAPE
     ============================================ -->
<div class="slide">
    <div class="slide-header">
        <h2 class="slide-title">Competitor Landscape</h2>
        <div class="slide-meta">
            {{ location }}<br>
            {{ report_date }}
        </div>
    </div>
    
    <div class="slide-content">
        <!-- TWO-COLUMN CHARTS -->
        <div class="two-column" style="height: 520px; margin-bottom: 30px;">
            <div class="chart-panel">
                <h3 class="chart-title">Agency Market Share</h3>
                <svg width="100%" height="400" viewBox="0 0 700 400">
                    <circle cx="350" cy="200" r="120" fill="none" stroke="rgba(203,161,53,0.1)" stroke-width="3"/>
                    
                    {% for segment in chart_data.market_share %}
                    <circle 
                        cx="{{ 350 + (90 * loop.index0 / (chart_data.market_share|length)) }}" 
                        cy="{{ 200 - (40 if loop.index0 % 2 == 0 else -40) }}" 
                        r="{{ 20 + (segment.percentage / 3) }}" 
                        fill="{{ segment.color }}" 
                        stroke="#0C0C0C" 
                        stroke-width="3" 
                        opacity="0.85"/>
                    {% endfor %}
                    
                    <circle cx="350" cy="200" r="70" fill="#0C0C0C" stroke="#CBA135" stroke-width="3"/>
                    <text x="350" y="210" font-family="Playfair Display" font-size="32" font-weight="600" fill="#CBA135" text-anchor="middle">{{ chart_data.market_share | length }}</text>
                    <text x="350" y="235" font-family="Inter" font-size="16" fill="#AFAFAF" text-anchor="middle">Agencies</text>
                </svg>
            </div>
            
            <div class="chart-panel">
                <h3 class="chart-title">Competitor Inventory</h3>
                {% if chart_data.competitor_inventory and chart_data.competitor_inventory|length > 0 %}
                <svg width="100%" height="400" viewBox="0 0 700 400">
                    {% for competitor in chart_data.competitor_inventory %}
                    <text x="20" y="{{ 70 + loop.index0 * 70 }}" font-family="Inter" font-size="16" fill="#EAEAEA">{{ competitor.name[:30] }}</text>
                    <rect x="280" 
                          y="{{ 52 + loop.index0 * 70 }}" 
                          width="{{ competitor.listings * 1.8 }}" 
                          height="32" 
                          fill="url(#compGradient)" 
                          stroke="#BA955F" 
                          stroke-width="2"/>
                    <text x="{{ 290 + competitor.listings * 1.8 }}" 
                          y="{{ 75 + loop.index0 * 70 }}" 
                          font-family="Inter" 
                          font-size="16" 
                          font-weight="600"
                          fill="#CBA135">{{ competitor.listings }}</text>
                    {% endfor %}
                    
                    <defs>
                        <linearGradient id="compGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#BA955F;stop-opacity:0.65" />
                            <stop offset="100%" style="stop-color:#CBA135;stop-opacity:0.9" />
                        </linearGradient>
                    </defs>
                </svg>
                {% endif %}
            </div>
        </div>
        
        <!-- COMPETITIVE INTELLIGENCE PANEL -->
        <div class="panel" style="border-left: 4px solid #CBA135;">
            <h3 class="panel-title">Competitive Intelligence</h3>
            <div class="panel-divider"></div>
            <p class="panel-text">{{ competitive_analysis.summary }}</p>
            {% if competitive_analysis.key_insights and competitive_analysis.key_insights|length > 0 %}
            <ul class="bullet-list">
                {% for insight in competitive_analysis.key_insights[:3] %}
                <li>{{ insight }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </div>
    
    <div class="slide-footer">
        <span class="footer-text">Voxmill Automations â€” Confidential | 2025</span>
        <span class="footer-page">4</span>
    </div>
</div>

<!-- ============================================
     SLIDE 5: STRATEGIC INTELLIGENCE
     ============================================ -->
<div class="slide">
    <div class="slide-header">
        <h2 class="slide-title">Strategic Intelligence</h2>
        <div class="slide-meta">
            {{ location }}<br>
            {{ report_date }}
        </div>
    </div>
    
    <div class="watermark">VOXMILL INTELLIGENCE</div>
    
    <div class="slide-content">
        <div class="panel" style="margin-bottom: 25px;">
            <h3 class="panel-title">Market Dynamics</h3>
            <div class="panel-divider"></div>
            <p class="panel-text">{{ strategic_intelligence.market_dynamics }}</p>
        </div>
        
        <div class="panel" style="margin-bottom: 25px;">
            <h3 class="panel-title">Pricing Strategy Implications</h3>
            <div class="panel-divider"></div>
            <p class="panel-text">{{ strategic_intelligence.pricing_strategy }}</p>
        </div>
        
        <div class="panel" style="margin-bottom: 25px;">
            <h3 class="panel-title">Opportunity Assessment</h3>
            <div class="panel-divider"></div>
            <p class="panel-text">{{ strategic_intelligence.opportunity_assessment }}</p>
        </div>
        
        <div class="panel" style="background: linear-gradient(135deg, rgba(203,161,53,0.15) 0%, rgba(176,141,87,0.08) 100%); border: 3px solid #CBA135;">
            <h3 class="panel-title">ðŸŽ¯ Executive Recommendation</h3>
            <p class="panel-text">{{ strategic_intelligence.recommendation }}</p>
        </div>
    </div>
    
    <div class="slide-footer">
        <span class="footer-text">Voxmill Automations â€” Confidential | 2025</span>
        <span class="footer-page">5</span>
    </div>
</div>

<!-- ============================================
     SLIDE 6: TOP OPPORTUNITIES
     ============================================ -->
<div class="slide">
    <div class="slide-header">
        <h2 class="slide-title">Top Market Opportunities</h2>
        <div class="slide-meta">
            {{ location }}<br>
            {{ report_date }}
        </div>
    </div>
    
    <div class="slide-content">
        {% if top_opportunities and top_opportunities|length > 0 %}
        <table class="table-luxury">
            <thead>
                <tr>
                    <th>Property</th>
                    <th>Type</th>
                    <th>Size</th>
                    <th>Price</th>
                    <th>Â£/sqft</th>
                    <th>Days</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody>
                {% for opportunity in top_opportunities[:8] %}
                <tr>
                    <td class="property-address">{{ opportunity.address[:45] }}</td>
                    <td>{{ opportunity.property_type }}</td>
                    <td class="align-right">{{ "{:,}".format(opportunity.size) }} sqft</td>
                    <td class="align-right">Â£{{ "{:,.0f}".format(opportunity.price) }}</td>
                    <td class="align-right">Â£{{ "{:,.0f}".format(opportunity.price_per_sqft) }}</td>
                    <td class="align-center">{{ opportunity.days_listed }}</td>
                    <td class="align-center">
                        <span class="score-badge score-{{ opportunity.score_class }}">{{ opportunity.score }}</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
    
    <div class="slide-footer">
        <span class="footer-text">Voxmill Automations â€” Confidential | 2025</span>
        <span class="footer-page">6</span>
    </div>
</div>

</body>
</html>
